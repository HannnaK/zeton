{% extends "base.html" %}
{% block top %}
{{ super() }}
<style type="text/css">
  .welcome {
    display: none;
  }
</style>
{% endblock %}
{% block content %}
<section class="index-child">
  <div class="col col-sm-12">
    <article class="article__container">
      <div class="article__box">
        <div class="article__item">
          <h3 name="username" class="article__title_light" >{{ child.firstname }}</h3>
          <div class="image__container">
            <img class="portrait__image" src="../static/images/boy1.jpg">
            <!--#TODO add avatar different for each child or default avatar -->
          </div>
        </div>
        <div class="article__item">
          <p class="article__text content-switched"> Ilość punktów </p>
          <p class="article__text content-switched">PKT</p>
          <h2 class="section__title_light">{{ child.points }}</h2>
        </div>
        <div class="article__item">
          <p class="article__text content-switched">Punkty doświadczenia </p>
          <p class="article__text content-switched">PD</p>
          <h2 class="section__title_light">{{ child.exp }}</h2>
        </div>
        <div class="article__item">
          <p class="article__text content-switched">Szkolny rekord tygodnia</p>
          <p class="article__text content-switched">SRT</p>
          <h2 class="section__title_light">{{ child.school_weekly_highscore }}</h2>
        </div>
      </div>
      <div class="article__box">
        <div class="article__item">
          {% if messages %}
          <div class="alert alert-dark">{{ messages[0] }}</div>
          {% endif %}

          {% if child.bans.6.active %}
          <h3 class="article__title" style="color: red;"> Masz BANA !</h3>
          <h4> Ban kończy się: {{ child.bans.6.stop|ban_time }}</h4>
          {% else %}
          <h3 class="article__title" style="color: lightgreen;">Możesz korzystać z komputera</h3>
          {% endif %}
        </div>
      </div>
    </article>
  </div>
</section>

<section class="add-points">
  <div class="col col-sm-12 col-md-12">
    <article class="article__container">
      <!--dodawanie-->
      <div id="dodawanie" class="article__box">
        <div class="article__item" data-switch-target="one">
          <h3 class="article__title"><span class="large">+</span></h3>
          <h3 class="article__title">Dodaj punkty</h3>
        </div>
        <div class="article__item" data-switch-target="two">
          {% block add_points %}{% endblock add_points %}
        </div>
      </div>
      <!--szczegóły-->
      <div id="details-container" class="article__box">
        <div class="article__item" data-switch-target="three">
          <p class="article__text">Szczegóły</p>
        </div>
        <div class="article__item" data-switch-target="four">
          <h3 class="article__title">Sposób na zdobycie punktów</h3>
          <br>
          <ul>
            <table>
              <tr>
                <th>Id</th>
                <th>Nazwa</th>
                <th>Punkty</th>
              </tr>
              {% for task in childs_tasks %}
              <tr>
                <td>{{ loop.index }}</td>
                <td>{{ task.name }}</td>
                <td>{{ task.points }}</td>
              </tr>
              {% endfor %}
            </table>
          </ul>
        </div>
      </div>
      <!--historia-->
      <div id="history-container" class="article__box">
        <div class="article__item" data-switch-target="five">
          <p class="article__text">Historia</p>
        </div>
        <div class="article__item" data-switch-target="six">
          <p>Test test</p>
          {% block history %}{% endblock history %}
        </div>
      </div>
    </article>
  </div>
  <div class="col col-sm-12 col-md-12">

  </div>
  <h5 class="text-center">SZKOLNY REKORD TYGODNIA--> chipsy & extra 100 pkt</h5>
  </div>

  <div id="odejmowanie" class="col-xl-6 square">
    <form>
      <div class="form-group button">
        <a class="btn btn-info" href="/prizes_detail/{{ child.id }}">Szczegóły</a>
      </div>
    </form>
    <h2 class="text-center">Wykorzystaj punkty</h2>

    {% if role == 'caregiver' %}
    <form action="/api/child/{{ child.id }}/points/use?return_url=/child/{{ child.id }}" method="post">
      {% else %}
      <form action="/api/child/{{ child.id }}/points/use" method="post">
        {% endif %}
        <div class="form-group button">
          Liczba punktów: <input class="form-control" type="number" name="points" required>

          <input class="btn btn-info" type="submit" name="wykorzystaj punkty" value="Wykorzystaj punkty" />
        </div>
        <h4 class="text-center">NAGRODY</h4>
      </form>

      <ul style="text-align:left;">
        <table>
          <tr>
            <th>Id</th>
            <th>Nazwa</th>
            <th>Punkty</th>
          </tr>
          {% for prize in childs_prizes %}
          <tr>
            <td>{{ loop.index }}</td>
            <td>{{ prize.name }}</td>
            <td>{{ prize.points }}</td>
          </tr>
          {% endfor %}
        </table>
      </ul>
    </form>
  </div>

  <div id="bany_warny" class="col-xl-6 square">
    <form>
      <div class="form-group button">
        <a class="btn btn-info" href="/bans_detail/{{ child.id }}">Szczegóły</a>
      </div>
    </form>
    <h2 style="text-align: center;"> *****Warny i bany****** </h2>
    <!--#TODO wymyślić i zmienić nazwę nagłówka "Warny i bany" -->
    <ol>
      {% for ban in child.bans.values() %}
      <li {%if ban.active %} style="color:red;" {% endif%}>WARN--> {{ban.name}}</li>
      {% endfor %}
    </ol>

    {% block bans %}{% endblock bans %}

  </div>

  <div id="punkty_szkola" class="col-xl-6 square">
    <form>
      <div class="form-group button">
        <a class="btn btn-info" href="/school_points_detail/{{ child.id }}">Szczegóły</a>
      </div>
    </form>

    <h2 class="text-center"> *** Punkty ze Szkoły *** </h2>

    <div><label> <input type="checkbox" name="1"> przyklad 1 </label></div>
    <div><label> <input type="checkbox" name="1"> przyklad 2 </label></div>
    <div><label> <input type="checkbox" name="1"> przyklad 3 </label></div>
    <div><label> <input type="checkbox"> przyklad 4 </label></div>
    <div><label> <input type="checkbox"> przyklad 5 </label></div>

  </div>
  </div>
  <form>
    <div class="button">
      {% block home_button %}{% endblock home_button %}
      <a class="btn btn-info" href="/logout">Wyloguj</a>
      <a class="btn btn-info" href="/settings">Ustawienia</a>
    </div>
  </form>

  </div>
</section>
<script type="text/javascript" src="../static/scripts/openContainer.js"></script>
{%endblock%}